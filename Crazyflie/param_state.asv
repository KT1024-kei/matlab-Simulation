%% State Spaec Param

g = 9.8;
m = 0.027;
stateA = [0  0  0  1  0  0  0  0  0  0  0  0;
          0  0  0  0  1  0  0  0  0  0  0  0;
          0  0  0  0  0  1  0  0  0  0  0  0;
          0  0  0  0  0  0  0  g  0  0  0  0;
          0  0  0  0  0  0 -g  0  0  0  0  0;
          0  0  0  0  0  0  0  0  0  0  0  0;
          0  0  0  0  0  0  0  0  0  1  0  0;
          0  0  0  0  0  0  0  0  0  0  1  0;
          0  0  0  0  0  0  0  0  0  0  0  1;
          0  0  0  0  0  0  0  0  0  0  0  0;
          0  0  0  0  0  0  0  0  0  0  0  0;
          0  0  0  0  0  0  0  0  0  0  0  0];
%         X  Y  Z Xd Yd Zd  R  P  Y Wx Wy Wz
I = [16.571710 0.830806 0.718277;
     0.830806 16.655602 1.800197;
     0.718277 1.800197 29.261652] * 10^(-6);
Jxx = I(1, 1);
Jyy = I(2, 2);
Jzz = I(3, 3);
stateB = [0   0      0     0;
          0   0      0     0;
          0   0      0     0;
          0   0      0     0;
          0   0      0     0;
          1/m 0      0     0;
          0   0      0     0;
          0   0      0     0;
          0   0      0     0;
          0   1/Jxx  0     0;
          0   0      1/Jyy 0;
          0   0      0     1/Jzz];
      
% 最適レギュレータ
Q = eye(12);       % 重み行列
Q(1, 1) = 100; Q(2, 2) = 100; Q(3, 3) = 100;
R = eye(4);         
N = zeros(12, 4);
% 最適なゲインを計算
LQRK = lqr(stateA, stateB, Q, R, N);

